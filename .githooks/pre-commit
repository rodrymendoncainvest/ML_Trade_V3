#!/usr/bin/env bash
set -euo pipefail

if [ "${SKIP_SMOKE:-}" = "1" ]; then
  echo "[pre-commit] SKIP_SMOKE=1 â€” skipping smoke tests."
  exit 0
fi

POWERSHELL="powershell.exe"
if command -v pwsh >/dev/null 2>&1; then POWERSHELL="pwsh"; fi

echo "[pre-commit] Running smoke tests via $POWERSHELL ..."
$POWERSHELL -NoProfile -ExecutionPolicy Bypass -File "scripts/smoke.ps1"
